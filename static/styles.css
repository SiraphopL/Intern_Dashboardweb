* {
  box-sizing: border-box;
  font-family: "Segoe UI", Tahoma, sans-serif;
}

body {
  margin: 0;
  background: #e6e6e6;
  /* ‡∏•‡∏ö overflow-x: hidden ‡∏≠‡∏≠‡∏Å‡πÑ‡∏õ */
}

/* ------------------ MAIN WRAPPER ------------------ */
.page {
  max-width: 1680px;
  width: 100%;
  margin: 0 auto;
  background: #ffffff;
  min-height: 950px;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  /* ‡πÄ‡∏≠‡∏≤ overflow-x ‡∏≠‡∏≠‡∏Å ‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏∞‡πÉ‡∏™‡πà‡πÄ‡∏õ‡πá‡∏ô visible ‡∏Å‡πá‡πÑ‡∏î‡πâ */
  overflow-x: visible;
}


/* ================= HEADER ================= */
.header {
  background: #2f6b2f;
  color: #fff;
  height: 70px;
  display: grid;
  grid-template-columns: 210px 1fr 210px;
  align-items: center;
  padding: 0 10px;
}

.header-left,
.header-right {
  display: flex;
  align-items: center;
  gap: 8px;
}

.logo-box {
  width: 48px;
  height: 48px;
  border-radius: 6px;
  background: #ffffff;
}

.header-title {
  text-align: center;
  font-weight: 700;
  font-size: 20px;
}

.header-right-text {
  font-size: 12px;
  line-height: 1.2;
  text-align: right;
}

/* =============== FILTER BAR =============== */
.filter-bar {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 8px;
  padding: 8px 16px;
  background: #f5f5f5;
  border-bottom: 1px solid #d0d0d0;
}

.filter-group {
  display: flex;
  align-items: center;
  gap: 8px;
}

.filter-label {
  background: #2f6b2f;
  color: #fff;
  padding: 4px 12px;
  border-radius: 3px;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
}

.filter-select {
  flex: 1;
  position: relative;
}

.filter-select select {
  width: 100%;
  padding: 5px 30px 5px 8px;
  border: 1px solid #b3b3b3;
  border-radius: 3px;
  font-size: 14px;
  appearance: none;
}

.filter-select::after {
  content: "‚ñº";
  font-size: 10px;
  position: absolute;
  right: 8px;
  top: 50%;
  transform: translateY(-50%);
  pointer-events: none;
  color: #555;
}

/* ============= MAIN LAYOUT (MID) ============= */
.main {
  display: grid;
  grid-template-columns: 370px 1fr;
  gap: 10px;
  padding: 8px 16px 0;
}

.panel-title {
  background: #2f6b2f;
  color: #fff;
  font-size: 14px;
  padding: 4px 8px;
  font-weight: 600;
}

.panel {
  border: 1px solid #b3b3b3;
  background: #fff;
}

/* LEFT MAP PANEL */
.map-panel {
  height: 420px;
}

.map-body {
  height: calc(420px - 35px);
  position: relative;
  background: #6c4a3c;
  margin: 4px;
  border-radius: 2px;
  overflow: hidden;
}

.map-placeholder {
  position: absolute;
  top: 10px;
  left: 10px;
  right: 10px;
  bottom: 10px;
  background: #7c5a45;
  border: 1px solid #fff;
  color: #fff;
  font-size: 13px;
  display: flex;
  justify-content: center;
  align-items: center;
  text-align: center;
}

#map {
  position: absolute;
  top: 8px;
  left: 8px;
  right: 8px;
  bottom: 8px;
  border-radius: 4px;
}

/* RIGHT CHART (RAIN) */
.rain-panel {
  height: 420px;
  display: flex;
  flex-direction: column;
  /* ‡πÅ‡∏Å‡πâ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ: ‡πÉ‡∏´‡πâ‡∏¢‡∏∑‡∏î‡πÄ‡∏ï‡πá‡∏°‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏•‡∏≤‡∏á */
  align-items: stretch;
  /* ‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏∞‡∏•‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ô‡∏µ‡πâ‡∏Å‡πá‡πÑ‡∏î‡πâ */
}

.chart-legend {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 4px 8px;
  font-size: 12px;
  border-bottom: 1px solid #ccc;
  flex-wrap: wrap;
  /* ‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡∏à‡∏≠‡πÅ‡∏Ñ‡∏ö‡∏ï‡∏±‡∏ß‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏•‡πâ‡∏ô */
}

.legend-item {
  display: flex;
  align-items: center;
  gap: 4px;
}

.legend-dot {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: #0078d7;
}

.legend-rect {
  width: 14px;
  height: 10px;
  background: #92c5de;
}

.rain-chart-body {
  flex: 1 1 auto;
  min-height: 0;
  /* ‡πÉ‡∏´‡πâ‡∏°‡∏µ margin ‡∏ã‡πâ‡∏≤‡∏¢‡∏Ç‡∏ß‡∏≤‡∏ô‡∏¥‡∏î‡∏´‡∏ô‡πà‡∏≠‡∏¢ */
  /* margin: 4px 6px 0; */
  border: 1px solid #d0d0d0;
  padding: 6px 0;
  /* ‡πÉ‡∏ä‡πâ‡πÄ‡∏ï‡πá‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á panel ‡πÑ‡∏õ‡πÄ‡∏•‡∏¢ */
  width: 100%;
  /* ‡∏•‡∏ö max-width: 1100px; ‡∏ó‡∏¥‡πâ‡∏á */
  position: relative;
  overflow: hidden;
  /* ‡∏ñ‡πâ‡∏≤ canvas ‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡πÄ‡∏Å‡∏¥‡∏ô‡πÉ‡∏´‡πâ‡∏ï‡∏±‡∏î‡πÉ‡∏ô‡∏Å‡∏£‡∏≠‡∏ö */
}

.rain-chart-body canvas {
  width: 100% !important;
  max-width: 100% !important;
  /* ‡∏Å‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏Å‡∏ß‡πà‡∏≤ container */
}

/* ========== LOADING OVERLAY / SKELETON ========== */

.chart-loading {
  position: absolute;
  inset: 0;
  /* ‡∏ó‡∏±‡∏ö‡πÄ‡∏ï‡πá‡∏°‡∏Å‡∏£‡∏≠‡∏ö chart-body */
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 8px;
  background: rgba(255, 255, 255, 0.8);
  z-index: 10;
  font-size: 12px;
  color: #555;
}

.chart-loading.hidden {
  display: none;
}

.loading-text {
  font-size: 12px;
  color: #555;
}

/* ‡πÅ‡∏ó‡πà‡∏á skeleton ‡πÉ‡∏ä‡πâ‡∏ï‡∏≠‡∏ô‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏ó‡πà‡∏á */
.skeleton-bars {
  display: flex;
  gap: 4px;
  align-items: flex-end;
}

.skeleton-bar {
  width: 10px;
  height: 40px;
  border-radius: 3px;
  background: linear-gradient(
    90deg,
    #e0e0e0 0%,
    #f5f5f5 50%,
    #e0e0e0 100%
  );
  background-size: 200% 100%;
  animation: skeleton-shimmer 1.3s infinite;
}

.skeleton-bar:nth-child(2) { height: 55px; }
.skeleton-bar:nth-child(3) { height: 35px; }
.skeleton-bar:nth-child(4) { height: 50px; }
.skeleton-bar:nth-child(5) { height: 32px; }
.skeleton-bar:nth-child(6) { height: 45px; }

/* ‡πÄ‡∏™‡πâ‡∏ô skeleton ‡πÉ‡∏ä‡πâ‡∏ï‡∏≠‡∏ô‡∏Å‡∏£‡∏≤‡∏ü‡πÄ‡∏™‡πâ‡∏ô */
.skeleton-line {
  width: 80%;
  height: 6px;
  border-radius: 999px;
  background: linear-gradient(
    90deg,
    #e0e0e0 0%,
    #f5f5f5 50%,
    #e0e0e0 100%
  );
  background-size: 200% 100%;
  animation: skeleton-shimmer 1.3s infinite;
}

/* effect ‡∏ß‡∏¥‡πà‡∏á ‡πÜ */
@keyframes skeleton-shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

/* ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏´‡πâ chart-body ‡πÄ‡∏õ‡πá‡∏ô relative ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ overlay ‡∏ß‡∏≤‡∏á‡∏ó‡∏±‡∏ö‡πÑ‡∏î‡πâ */
.rain-chart-body,
.kpi-chart-body {
  position: relative;
}

/* ===== ERROR OVERLAY + RETRY BUTTON ===== */

.chart-error {
  position: absolute;
  inset: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 8px;
  background: rgba(255, 255, 255, 0.9);
  z-index: 11;
  text-align: center;
}

.chart-error.hidden {
  display: none;
}

.error-text {
  font-size: 12px;
  color: #b00020;
}

.retry-btn {
  padding: 4px 12px;
  font-size: 12px;
  border-radius: 4px;
  border: 1px solid #2f6b2f;
  background: #2f6b2f;
  color: #fff;
  cursor: pointer;
}

.retry-btn:hover {
  background: #275727;
}

/* ========== SMALL ICON BAR (‡∏ä‡πà‡∏ß‡∏á‡∏£‡∏π‡∏õ‡∏Ç‡πâ‡∏≤‡∏ß) ========== */
/* ‡πÅ‡∏ñ‡∏ß‡∏£‡∏π‡∏õ‡∏Ç‡πâ‡∏≤‡∏ß‡πÉ‡∏ï‡πâ‡∏Å‡∏£‡∏≤‡∏ü */
.icon-bar {
  margin: 0;
  /* ‚¨ÖÔ∏è ‡∏ï‡∏±‡∏î margin ‡∏ã‡πâ‡∏≤‡∏¢/‡∏Ç‡∏ß‡∏≤‡∏≠‡∏≠‡∏Å */
  display: grid;
  border: 1px solid #b3b3b3;
  height: 42px;
  background: #ffffff;
  box-sizing: border-box;
  width: 100%;
  overflow: hidden;
}



.icon-cell {
  border-right: 1px solid #dddddd;
  border-left: 1px solid #dddddd;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 18px;
  cursor: pointer;
  transition: background 0.15s, box-shadow 0.15s;
  user-select: none;
  background: #ffffff;
}

/* .icon-cell:last-child {
  border-right: none;
} */

.icon-cell:hover {
  background: #fffbe6;
}

.icon-cell.active {
  background: #ffe08a;
  box-shadow: inset 0 0 0 2px #d39b00;
}

/* ‡∏™‡∏µ‡∏ä‡πà‡∏≠‡∏á‡∏£‡∏π‡∏õ‡∏Ç‡πâ‡∏≤‡∏ß‡∏ï‡∏≤‡∏°‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ú‡∏•‡∏ú‡∏•‡∏¥‡∏ï */
.icon-cell.level-0 {
  color: #fff;
}

.icon-cell.level-1 {
  color: #000;
}

.icon-cell.level-2 {
  color: #fff;
}

/* ‡πÄ‡∏ô‡πâ‡∏ô dekad ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏ä‡πà‡∏ß‡∏á‡∏õ‡∏•‡∏π‡∏Å */
/* .icon-cell.planting {
  border-bottom: 3px solid #2f6b2f;
} */

/* active ‡∏ó‡∏±‡∏ö‡∏™‡∏µ‡πÄ‡∏î‡∏¥‡∏°‡∏ô‡∏¥‡∏î‡∏´‡∏ô‡πà‡∏≠‡∏¢ ‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á‡πÄ‡∏´‡πá‡∏ô‡πÇ‡∏ó‡∏ô */
.icon-cell.active {
  box-shadow: inset 0 0 0 2px #d39b00;
}


/* =========== KPI ROW =========== */
.main-lower .kpi-row {
  margin: 0;
  /* ‡πÉ‡∏ä‡πâ padding ‡∏Ç‡∏≠‡∏á main-lower ‡πÅ‡∏ó‡∏ô */
}

.kpi-row {
  display: grid;
  grid-template-columns: repeat(5, minmax(0, 1fr));
  /* ‡∏ó‡∏±‡πâ‡∏á 5 ‡πÉ‡∏ö‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô */
  gap: 6px;
  margin: 6px 16px 0;
}

.kpi-card {
  border: 1px solid #b3b3b3;
  background: #fff;
  height: 80px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  padding: 4px 6px;
  font-size: 12px;
  min-width: 0;
}

.kpi-title {
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 6px;
  margin-bottom: 2px;

  /* ‡πÄ‡∏™‡∏£‡∏¥‡∏°‡πÑ‡∏î‡πâ‡∏ñ‡πâ‡∏≤‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏¢‡∏≤‡∏ß‡∏°‡∏≤‡∏Å */
  white-space: normal;
}

.kpi-icon {
  width: 22px;
  height: 22px;
  border-radius: 3px;
  background: #ff9900;
}

.kpi-value {
  font-size: 20px;
  font-weight: 700;
  text-align: right;
  color: #e51b24;
  padding-right: 2px;
}

/* ‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ñ‡∏ö‡∏ä‡πà‡∏ß‡∏á‡∏õ‡∏•‡∏π‡∏Å‡πÉ‡∏´‡πâ‡∏Å‡∏£‡∏∞‡∏ó‡∏±‡∏î‡∏£‡∏±‡∏î + ‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß */
.kpi-period {
  text-align: center;
  font-size: 12px;
  /* ‡πÄ‡∏•‡πá‡∏Å‡∏•‡∏á‡∏ô‡∏¥‡∏î‡∏´‡∏ô‡πà‡∏≠‡∏¢ */
  font-weight: 700;
  background: #fce6b2;
  padding: 2px 4px;
  margin-top: 2px;

  /* üîí ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡πÑ‡∏°‡πà‡∏´‡πà‡∏≠‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÉ‡∏´‡∏°‡πà */
  white-space: nowrap;
  overflow: hidden;
  /* ‡∏ñ‡πâ‡∏≤‡πÅ‡∏Ñ‡∏ö‡∏°‡∏≤‡∏Å‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏ï‡∏±‡∏î‡πÉ‡∏ô‡∏Å‡∏£‡∏≠‡∏ö */
  text-overflow: ellipsis;
  /* ‡πÅ‡∏™‡∏î‡∏á ... ‡∏ï‡∏≠‡∏ô‡∏Å‡∏£‡∏≠‡∏ö‡πÅ‡∏Ñ‡∏ö */
}

/* ===== ‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ñ‡∏ß‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ô‡πâ‡∏≥‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡πà‡∏ô ‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏Ç‡∏∂‡πâ‡∏ô‡∏Ç‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° ===== */

/* ‡∏•‡∏î‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á‡∏£‡∏≠‡∏ö ‡πÜ ‡πÅ‡∏ñ‡∏ß‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÉ‡∏ô panel ‡∏Ç‡∏ß‡∏≤‡∏•‡πà‡∏≤‡∏á */
.kpi-panel .kpi-row {
  margin: 2px 6px 2px;
  gap: 4px;
}

/* ‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô: ‡πÄ‡∏ï‡∏µ‡πâ‡∏¢‡∏•‡∏á ‡πÑ‡∏°‡πà‡πÄ‡∏ß‡πâ‡∏ô‡∏ö‡∏ô‚Äì‡∏•‡πà‡∏≤‡∏á‡πÄ‡∏¢‡∏≠‡∏∞ */
.kpi-card {
  height: 70px;
  /* ‡πÄ‡∏î‡∏¥‡∏° 80px */
  padding: 4px 6px 3px;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  /* ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ space-between ‡πÅ‡∏•‡πâ‡∏ß */
  font-size: 12px;
}

.kpi-title {
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 6px;
  margin-bottom: 2px;
}

/* ‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç (‡∏Ç‡πâ‡∏≠ 2‚Äì4) ‚Üí ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô: ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô+‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ã‡πâ‡∏≤‡∏¢ / ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏Ç‡∏ß‡∏≤ */
.kpi-card-number {
  flex-direction: row;
  align-items: flex-start;
}

.kpi-card-number .kpi-title {
  margin-bottom: 0;
}

.kpi-card-number .kpi-value {
  font-size: 18px;
  /* ‡πÄ‡∏•‡πá‡∏Å‡∏•‡∏á‡∏ô‡∏¥‡∏î‡πÉ‡∏´‡πâ‡πÑ‡∏°‡πà‡∏î‡∏±‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà */
  font-weight: 700;
  text-align: right;
  padding-right: 2px;
  margin-left: auto;
  /* ‡∏î‡∏±‡∏ô‡πÑ‡∏õ‡∏ä‡∏¥‡∏î‡∏Ç‡∏ß‡∏≤‡∏Å‡∏≤‡∏£‡πå‡∏î */
}

/* panel ‡∏ù‡∏±‡πà‡∏á‡∏Ç‡∏ß‡∏≤‡πÉ‡∏ï‡πâ‡∏Å‡∏£‡∏≤‡∏ü‡∏ô‡πâ‡∏≥‡∏ù‡∏ô */
.kpi-panel {
  border: 1px solid #b3b3b3;
  background: #fff;
  display: flex;
  flex-direction: column;
  overflow: visible;
  /* ‡∏Å‡∏±‡∏ô‡πÇ‡∏î‡∏ô‡∏ï‡∏±‡∏î‡πÄ‡∏ß‡∏•‡∏≤ layout ‡πÅ‡∏Å‡∏ß‡πà‡∏á */
}

/* ‡πÉ‡∏´‡πâ‡∏Å‡∏¥‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö calendar-panel ‡πÉ‡∏ô‡πÅ‡∏ñ‡∏ß‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô */
.main-lower .kpi-panel {
  height: 100%;
}

/* ‡∏Ç‡∏¢‡∏±‡∏ö kpi-row ‡∏Ç‡πâ‡∏≤‡∏á‡πÉ‡∏ô‡πÉ‡∏´‡πâ‡∏°‡∏µ margin ‡∏ô‡∏¥‡∏î‡∏´‡∏ô‡πà‡∏≠‡∏¢ */
.kpi-panel .kpi-row {
  margin: 4px 6px 6px;
}

/* ===== KPI PANEL ‚Üí CHARTS ===== */
.kpi-charts-wrapper {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
  margin: 10px 6px 10px;
}

.kpi-chart-panel {
  border: 1px solid #b3b3b3;
  background: #fff;
  height: 320px;
  display: flex;
  flex-direction: column;
}

.kpi-chart-body {
  flex: 1;
  margin: 4px 6px 6px;
  border: 1px solid #d0d0d0;
  padding: 6px;
  overflow: hidden;
  /* ‡∏Å‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ canvas ‡πÇ‡∏ú‡∏•‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏£‡∏≠‡∏ö */
}

.kpi-chart-body canvas {
  width: 100% !important;
  /* ‡∏¢‡∏∂‡∏î‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏£‡∏≠‡∏ö‡πÄ‡∏™‡∏°‡∏≠ */
  max-width: 100% !important;
  height: 100%;
}

/* ===== ‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏ú‡∏•‡∏ú‡∏•‡∏¥‡∏ï ‡πÅ‡∏ö‡∏ö‡∏ï‡∏≤‡∏°‡∏£‡∏π‡∏õ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á ===== */
.cost-card {
  border: 1px solid #b3b3b3;
  background: #fff;
  height: 80px;
  padding: 4px 6px;
  font-size: 12px;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  min-width: 0;
}

.cost-header {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-bottom: 4px;
}

.cost-icon {
  width: 22px;
  height: 22px;
  border-radius: 3px;
  background: #ffcc00;
}

.cost-title {
  font-weight: 600;
}

.cost-bar-wrapper {
  position: relative;
  margin: 4px;
  height: 20px;
  border: 1px solid #666;
  display: flex;
  overflow: visible;
}

.cost-bar-seg {
  flex: 1;
}

.cost-green {
  background: #00a651;
}

.cost-yellow {
  background: #f7e08b;
}

.cost-red {
  background: #e84c3d;
}

.cost-label-row {
  display: flex;
  margin-top: 1px;
  font-size: 10px;
}

.cost-label {
  flex: 1;
  text-align: center;
  white-space: nowrap;
}

/* ‡∏™‡∏≤‡∏°‡πÄ‡∏´‡∏•‡∏µ‡πà‡∏¢‡∏°‡∏ï‡∏±‡∏ß‡∏ä‡∏µ‡πâ */
.cost-pointer {
  position: absolute;
  top: -8px;
  /* ‡∏¢‡∏∑‡πà‡∏ô‡∏•‡∏á‡∏°‡∏≤‡πÅ‡∏ï‡∏∞‡πÅ‡∏ñ‡∏ö‡∏™‡∏µ */
  left: 15%;
  /* ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (JS ‡∏à‡∏∞‡∏°‡∏≤‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô left ‡∏ó‡∏µ‡∏´‡∏•‡∏±‡∏á) */
  width: 0;
  height: 0;
  border-left: 6px solid transparent;
  border-right: 6px solid transparent;
  border-top: 8px solid #000;
  /* ‡πÉ‡∏ä‡πâ border-top ‡πÅ‡∏ó‡∏ô ‚Üí ‡∏™‡∏≤‡∏°‡πÄ‡∏´‡∏•‡∏µ‡πà‡∏¢‡∏°‡∏ä‡∏µ‡πâ‡∏•‡∏á */
  border-bottom: none;
}


/* =========== BOTTOM CHARTS =========== */
.bottom-row {
  display: grid;
  grid-template-columns: 1.2fr 1fr;
  gap: 10px;
  margin: 10px 16px 16px;
}

.bottom-panel {
  border: 1px solid #b3b3b3;
  background: #fff;
  height: 260px;
}

.bottom-chart-body {
  height: calc(260px - 28px);
  margin: 4px 6px 6px;
  border: 1px solid #d0d0d0;
  padding: 6px;
}

.bottom-chart-body canvas {
  width: 100%;
  height: 100%;
}

/* ============ FOOTER ============ */
.footer-note {
  text-align: center;
  font-size: 11px;
  margin: 4px 16px 10px;
  color: #444;
}

/* =========================================================
   RESPONSIVE LAYOUT
   ‡πÑ‡∏°‡πà‡πÅ‡∏ï‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• / ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á HTML ‚Äî ‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞ layout
   ========================================================= */

/* --- ‡∏à‡∏≠‡πÄ‡∏•‡πá‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 1200px (‡πÇ‡∏ô‡πâ‡∏ï‡∏ö‡∏∏‡πä‡∏Å‡πÄ‡∏•‡πá‡∏Å / ‡πÅ‡∏ó‡πá‡∏ö‡πÄ‡∏•‡πá‡∏ï‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô) --- */
@media (max-width: 1200px) {

  .header {
    grid-template-columns: 180px 1fr;
    grid-auto-rows: auto;
    height: auto;
    row-gap: 4px;
  }

  .header-right {
    justify-content: flex-end;
  }

  .main {
    grid-template-columns: 1fr;
    /* map + chart ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ö‡∏ô-‡∏•‡πà‡∏≤‡∏á */
  }

  .map-panel,
  .rain-panel {
    height: 400px;
  }

  .rain-chart-body {
    height: calc(400px - 28px - 32px);
  }

  .filter-bar {
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }

  .kpi-row {
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }

  .bottom-row {
    grid-template-columns: 1fr;
    /* ‡∏Å‡∏£‡∏≤‡∏ü‡∏•‡πà‡∏≤‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ö‡∏ô-‡∏•‡πà‡∏≤‡∏á */
  }
}

/* --- ‡∏à‡∏≠‡πÄ‡∏•‡πá‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 768px (‡πÅ‡∏ó‡πá‡∏ö‡πÄ‡∏•‡πá‡∏ï‡∏ï‡∏±‡πâ‡∏á / ‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠) --- */
@media (max-width: 768px) {

  .page {
    border-left: none;
    border-right: none;
  }

  .header {
    grid-template-columns: 1fr;
    height: auto;
    text-align: center;
    padding: 8px;
  }

  .header-left {
    justify-content: center;
  }

  .header-right {
    justify-content: center;
  }

  .header-right-text {
    text-align: center;
  }

  .filter-bar {
    padding: 8px;
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  .filter-group {
    flex-direction: column;
    align-items: stretch;
  }

  .filter-label {
    width: 100%;
    text-align: center;
  }

  .main {
    padding: 8px;
  }

  .icon-bar {
    margin: 4px 8px 0;
  }

  .kpi-row {
    margin: 6px 8px 0;
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  .bottom-row {
    margin: 10px 8px 16px;
  }

  .footer-note {
    margin: 4px 8px 10px;
  }
}

/* --- ‡∏à‡∏≠‡πÄ‡∏•‡πá‡∏Å‡∏°‡∏≤‡∏Å < 480px (‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡πÄ‡∏•‡πá‡∏Å) --- */
@media (max-width: 480px) {

  .filter-bar {
    grid-template-columns: 1fr;
  }

  .kpi-row {
    grid-template-columns: 1fr;
  }

  .chart-legend {
    gap: 8px;
  }

  .header-title {
    font-size: 18px;
  }
}

/* ===== ‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á ===== */
.calendar-panel {
  border: 1px solid #b3b3b3;
  background: #fff;
  padding-bottom: 8px;
  display: flex;
  flex-direction: column;
}

.calendar-header-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 4px 8px 0;
  font-size: 12px;
}

.calendar-title-text {
  font-weight: 600;
}

.calendar-legend {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  font-size: 11px;
}

.calendar-legend-item {
  display: flex;
  align-items: center;
  gap: 4px;
}

.calendar-legend-color {
  width: 14px;
  height: 14px;
  border-radius: 3px;
  display: inline-block;
}

/* ‡∏£‡∏µ-use ‡∏™‡∏µ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö bar ‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô */
.yield-level-0 {
  background: #00a651;
}

/* ‡∏ï‡∏≤‡∏°‡πÄ‡∏Å‡∏ì‡∏ë‡πå */
.yield-level-1 {
  background: #f7e08b;
}

/* ‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏Å‡∏ì‡∏ë‡πå */
.yield-level-2 {
  background: #e84c3d;
}

/* ‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏°‡∏≤‡∏Å */

.calendar-grid {
  flex: 1;
  margin: 4px 8px 8px;
  display: grid;
  grid-template-columns: 70px repeat(7, 1fr);
  grid-auto-rows: 1fr;
  /* ‡πÅ‡∏ñ‡∏ß‡∏™‡∏π‡∏á‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô ‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏ï‡πá‡∏°‡∏Å‡∏£‡∏≠‡∏ö */
  font-size: 11px;
  border-top: 1px solid #dddddd;
  border-left: 1px solid #dddddd;
}

/* header ‡πÅ‡∏ñ‡∏ß‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡∏±‡∏ô */
.calendar-day-header {
  font-weight: 600;
  text-align: center;
  display: flex;
  align-items: center;
  justify-self: center;
}

/* ‡∏ä‡πà‡∏≠‡∏á label ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå */
.calendar-week-label {
  display: flex;
  align-items: center;
  justify-content: flex-start;
  padding-left: 6px;
}

/* ‡∏ä‡πà‡∏≠‡∏á‡∏ß‡∏±‡∏ô */
.calendar-cell {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 2px 0;
  border-right: 1px solid #dddddd;
  border-bottom: 1px solid #dddddd;
  height: auto;
}

.calendar-cell-box {
  width: 24px;
  height: 24px;
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 11px;
}

/* ‡∏™‡∏µ‡∏Ç‡∏≠‡∏á cell ‡∏ï‡∏≤‡∏° level (‡πÉ‡∏ä‡πâ‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö legend ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢) */
.calendar-cell-box.level-0 {
  background: #00a651;
  color: #fff;
}

.calendar-cell-box.level-1 {
  background: #f7e08b;
  color: #000;
}

.calendar-cell-box.level-2 {
  background: #e84c3d;
  color: #fff;
}

/* ‡∏ß‡∏±‡∏ô‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• */
.calendar-cell-box.no-data {
  background: #f0f0f0;
  color: #aaa;
}

.main-lower {
  display: grid;
  grid-template-columns: 370px 1fr;
  /* ‡∏ã‡πâ‡∏≤‡∏¢‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡πÄ‡∏ó‡πà‡∏≤ map-panel, ‡∏Ç‡∏ß‡∏≤‡πÄ‡∏ï‡πá‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠ */
  gap: 10px;
  padding: 6px 16px 0;
  align-items: stretch;
}

/* üì± Responsive */
@media (max-width: 1200px) {
  .kpi-charts-wrapper {
    grid-template-columns: 1fr;
  }
}


/* ‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏ú‡∏•‡∏ú‡∏•‡∏¥‡∏ï‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡πà‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢ */
.cost-card {
  height: 70px;
  padding: 4px 6px 3px;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
}

.cost-header {
  gap: 6px;
  margin-bottom: 2px;
}

.cost-bar-wrapper {
  height: 18px;
  /* ‡πÄ‡∏ï‡∏µ‡πâ‡∏¢‡∏•‡∏á‡∏ô‡∏¥‡∏î */
}

.cost-label-row {
  margin-top: 0;
  font-size: 10px;
}